<!DOCTYPE html>
<html>
<head>
	<meta charset='UTF-8'>
	<link rel='stylesheet' href='main.css'>
    
	<title></title>
    <script src="http://code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="js/lib/three.js"></script>
    <script src="js/lib/OrbitControls.js"></script>

    <script src="js/3ddemo.js" type="text/javascript"></script>
    <script src="proto.js" type="text/javascript"></script>
<script>


$(function() {
    $(".exp").attr("draggable","true");
    $(".exp").bind("dragstart", onDragStart);
    $(".exp").each(function(i){
        $(this).attr('id', "exp-" + i);
    });

    $(".exp_holl").attr("dropzone","move"); 
    $(".exp_holl").bind("dragover", onDragOver);
    $(".exp_holl").bind("drop", onExpDrop);
    $(".exp_holl").each(function(i){	
        $(this).attr('id', "eholl-" + i);
    });

    $(".stm").attr("draggable","true");
    $(".stm").bind("dragstart", onDragStart);
    $(".stm").each(function(i){
        $(this).attr('id', "stm-" + i);
    });

    $(".stm_holl").attr("dropzone","move");
    $(".stm_holl").bind("dragover", onDragOver);
    $(".stm_holl").bind("drop", onStmDrop);
    $(".stm_holl").each(function(i){	
        $(this).attr('id', "sholl-" + i);
    });

    $(".variable").attr("draggable","true");
    $(".variable").bind("dragstart", onDragStart);
    $(".variable").each(function(i){	
        $(this).attr('id', "var-" + i);
    });

    $(".main_canvas").attr("dropzone","move");
    $(".main_canvas").attr("id","the-main");
    $(".main_canvas").bind("dragover", onDragOver);
    $(".main_canvas").bind("drop", onMainCanvasDrop);

    $(".main_canvas").bind("click", onMainCanvasClick);
    $("#open_scn_window").bind("click", onOpenScenarioWindow);

    $(".stm_holl").bind("click", onStmHollClick);


    $('.scn_win_flap').on('click', showScenarioPanel);
    $(".script_tray").on('click', onScriptTrayClick);
    $(".script_tray").on('click', '.stm_holl',    onStmHollClick);
    $(".script_tray").on('click', '.script_closer', foldScript );
    $(".script_tray").on('click', '.script_title', editScriptTitle);

    $(".script_tray").on('click', '.stm_closer'   , foldStatement);
    $(".script_tray").on('click', '.stm_title'    , editStatementTitle);

    $(".script_tray").on('click', '.exp_holl', onExpHollClick);
    $(".script_tray").on('click', '.operator_editor', onOperatorEditClick);

    $(".script_tray").on('click', '.literal_value', editLiteralValue);

    $(".main_canvas").on('click', '.vname', editVariableName);
    $(".main_canvas").on('click', '.literal_value', editLiteralValue);

    $("#rubbishtip").attr("dropzone","move");
    $("#rubbishtip").bind("dragover", onDragOver);
    $("#rubbishtip").bind("drop"    , onRubbishtipDrop);


    /*3Dデモ*/
    createDemoScene($("#3ddemo"));
});
</script>
</head>
<body>
<div class="scn_win_flap"></div>

<div class="scenario_window">
  <div class="script_tray_header">initializer (最初に一度だけ、上から順に実行します)</div>
  <div class="script_tray" category="initializer"></div>
  <div class="script_tray_header">body (全部が並列にに動き出します)</div>
  <div class="script_tray" category="body" ><div style='color:red;position:absolute; width:100%; height:1em; bottom:0; text-align:center;'>clickしてadd</div></div>
<!--
  <div class="script_tray_header">terminator (最後の後始末)</div>
  <div class="script_tray" category="terminator"></div>
-->
</div>

<div class="scenario_title">
シナリオ名 [資生堂チューブピック] <span style="color:red">(編集中)</span>
</div>
<div class="main_canvas">
</div>
<div class="main_ctrl">
  <img id="rubbishtip" src="rubbishtip.png" height="70">
  <img src="start.png" height="90">
</div>

</body>
</html>
